
@model WebMessenger.Models.User_Chat


@if (!string.IsNullOrEmpty(Model.selectedChat)) {
    @using (Html.BeginForm("ChatAsync", "Messenger", FormMethod.Post)) {
        <div id="toolBox">
            @using (Html.BeginForm("ChatAsync", "Messenger", FormMethod.Post)) {
                <input type="hidden" name="id" value="@Model.selectedChat" />
                <input type="submit" value="Refresh Chat" />
            }
        </div>
    }
}

@{
    if (!string.IsNullOrEmpty(Model.selectedChat)) {

        <div id="display">
            <table>
                @{
                    foreach (WebMessenger.Models.ChatEntry s in Model.Chat) {
                        string link = "https://thetangle.org/transaction/" + s.TransactionID;
                        <tr>
                            <td id="linkElement">
                                <form target="_blank" action="@link">
                                    <input type="submit" value="Link" />
                                </form>
                            </td>
                            <td id="chatElement">
                                @s.Name : @s.Message
                            </td>
                        </tr>
                    }
                }
            </table>
        </div>
        <div id="input">

            @using (Html.BeginForm("SendMessageAsync", "Messenger", FormMethod.Post)) {
                <input id="inputField" type="text" name="Message" />
                <input type="submit" value="Send" />
            }
        </div>
    }

}
